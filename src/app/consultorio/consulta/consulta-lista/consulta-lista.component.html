<div class="box box-primary">
  <div class="box-header with-border">
      <h3 class="box-title">Consultas</h3>      
  </div>
  <div class="box-body">  
    <div class="btn-group btn-group-sm" role="group">
      <button type="button" class="btn btn-default" (click)="onNovaConsulta()"><i class="fa fa-file-o" aria-hidden="true"></i> Nova</button>{{' '}}
      <button type="button" class="btn btn-default" (click)="onRefresh()"><i class="fa fa-refresh" aria-hidden="true"></i> Atualizar</button>
    </div>
    <p></p>
    <table class="table table-hover table-pointer" *ngIf="consultas$ | async as consultas; else loading">
      <thead>
        <tr>
          <th>#</th>
          <th>Paciente</th>
          <th>Dt Consulta</th>
          <th>Diagnostico</th>
          <th>Conduta</th>
          <th>Exames</th>
          <th>Retorno</th>          
          <th>Cid</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let consulta of consultas" (click)="onDetalhe(consulta.id)">
          <td>{{ consulta.id }}</td>
          <td>{{ consulta.paciente.nome | slice:0:25 }}</td>
          <td>{{ consulta.dtConsulta | date: 'dd/MM/yyyy'}}</td>
          <td>{{ consulta.diagnostico | slice:0:35 }}</td>
          <td>{{ consulta.conduta | slice:0:35 }}</td>          
          <td>{{ consulta.exames | slice:0:35 }}</td>
          <td>{{ consulta.retorno | date: 'MM/yyyy' }}</td>
          <td>{{ consulta.cid }}</td>
          
        </tr>
      </tbody>
    </table>
    <ng-template #loading>
      <span>Carregando Consultas...</span>
    </ng-template>    
  </div><!-- /.box-body -->
</div><!-- /.box -->         